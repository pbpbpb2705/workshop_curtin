:root{
  --bg:#f7fafc; --panel:#ffffff; --fg:#111827; --muted:#4b5563;
  --border:#e5e7eb; --accent:#2563eb; --ok:#16a34a; --warn:#d97706;
  --bulb-off:#e5e7eb; --bulb-on:#facc15; --outline:#cbd5e1;
  --shadow: 0 8px 24px rgba(17,24,39,.08);
}
*{box-sizing:border-box}
body{
  font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif;
  margin:0; padding:20px; background:var(--bg); color:var(--fg);
}

/* Back-to-home topbar (light) */
.topbar{
  position: sticky; top: 0; z-index: 50;
  background:var(--panel); border-bottom:1px solid var(--border);
  padding:10px 16px; display:flex; justify-content:flex-start;
}
.back-btn{
  appearance:none; border:1px solid var(--border);
  background:linear-gradient(135deg, #2563eb, #10b981);
  color:#fff; font-weight:800; letter-spacing:.2px;
  padding:10px 14px; border-radius:999px; cursor:pointer;
  box-shadow:0 6px 16px rgba(37,99,235,.25);
  transition:transform .12s ease, box-shadow .12s ease, filter .15s ease;
}
.back-btn:hover{ transform:translateY(-1px); box-shadow:0 12px 24px rgba(17,24,39,.12) }
.back-btn:active{ transform:translateY(0) }
.back-btn:focus-visible{ outline:3px solid #2563eb; outline-offset:3px }

.container{max-width:900px;margin:0 auto}
h1{margin:8px 0 6px;font-size:28px}
h2{margin:12px 0 8px;font-size:18px}
.tip{opacity:.95;margin:0 0 16px;color:var(--muted)}

/* Vertical layout always */
.grid{
  display:grid;
  grid-template-columns: 1fr;
  gap:20px;
  align-items:start;
}

/* Bulb board */
.bulbs{
  display:grid;
  grid-template-columns: repeat(5, 1fr);
  gap:14px;
}
.bulb{
  width:88px; height:88px; border-radius:999px;
  border:3px solid var(--outline);
  background:var(--bulb-off);
  box-shadow: inset 0 1px 0 rgba(255,255,255,.7), var(--shadow);
  transition:background .15s ease;
  display:flex; align-items:center; justify-content:center;
  font-weight:700; color:#111827;
}
.bulb.on{background:var(--bulb-on)}

/* Switch panels */
.switches{ display:grid; grid-template-columns: 1fr; gap:12px; }
.switchcard{
  background:var(--panel);
  border:1px solid var(--border);
  border-radius:12px; padding:12px; box-shadow: var(--shadow);
}
.switchrow{
  display:flex; align-items:center; gap:12px; margin-bottom:10px;
}
.toggle{
  appearance:none; width:56px; height:32px; border-radius:999px; position:relative; outline:none;
  background:#e5e7eb; border:1px solid var(--border); cursor:pointer; transition:background .15s ease;
}
.toggle:before{
  content:""; position:absolute; top:3px; left:3px; width:26px; height:26px; border-radius:999px; background:#ffffff;
  box-shadow:0 1px 2px rgba(0,0,0,.08);
  transition:transform .15s ease;
}
.toggle:checked{background:#34d399}
.toggle:checked:before{transform:translateX(24px)}
.switchlbl{min-width:86px; font-weight:600}
.statepill{
  font-size:12px; padding:2px 8px; border-radius:999px; border:1px solid var(--border); color:var(--muted); background:#f8fafc;
}
.statepill.on{color:#059669; border-color:#bbf7d0; background:#ecfdf5}

/* Ifâ€“else block */
.logic{
  background:#f8fafc; border:1px solid var(--border); border-radius:8px; padding:8px 10px;
  font-family:ui-monospace, SF Mono, Menlo, Consolas, monospace; font-size:13px; white-space:pre; line-height:1.35;
  margin-top:6px;
}
.logic .line{opacity:.85}
.logic .line.hit{opacity:1; color:#0f172a; background:#eef2ff; border-left:3px solid var(--accent); padding-left:6px}

/* Logic controls */
.logic-controls{
  display:grid; grid-template-columns: 1fr; gap:8px; margin:6px 0 2px;
}
.logic-controls label{ font-size:12px; color:var(--muted) }
.logic-controls select{
  width:100%; padding:6px 8px; border-radius:8px; border:1px solid var(--border); background:#fff; color:var(--fg);
  cursor:pointer;
}

.actions{margin-top:18px}
#resetBtn{
  padding:10px 16px; background:#fff; color:var(--fg);
  border:1px solid var(--border); border-radius:10px; cursor:pointer; box-shadow: var(--shadow);
}
#resetBtn:hover{ filter:brightness(1.02) }

.win{ color:var(--ok); font-weight:700 }
.warn{ color:var(--warn); font-weight:700 }

/* Small-device refinements (vertical stays the same) */
@media (max-width: 640px){
  .bulbs{ grid-template-columns: repeat(3, 1fr); }
  .bulb{ width:78px; height:78px; }
}
@media (max-width: 420px){
  .bulbs{ grid-template-columns: repeat(2, 1fr); }
  .bulb{ width:68px; height:68px; }
}
